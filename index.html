<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>inicpp: inicpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">inicpp
   </div>
   <div id="projectbrief">C++ parser of INI files with schema validation.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('index.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">inicpp </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="http://badges.mit-license.org"></a> <a href="https://github.com/SemaiCZE/inicpp/wiki"></a> <a href="http://semaicze.github.io/inicpp"></a></p>
<p>C++ parser of INI files with schema validation.</p>
<h2>About</h2>
<p>This project started as semestral work for <em>Recommended Programming Practices</em> class at <b>MFF UK</b>, Prague, in 2016. After deadline the project was published at <em>GitHub</em> under MIT license.</p>
<p>Great emphasis was put on qualities of object oriented design and clean implementation with modern C++14 features.</p>
<p>Originally written by:</p>
<ul>
<li>Petr Stefan (<em><a href="https://github.com/SemaiCZE/">SemaiCZE</a></em>)</li>
<li>Martin Polanka (<em><a href="https://github.com/Neloop/">Neloop</a></em>)</li>
</ul>
<h2>Build instructions</h2>
<p><b>Inicpp</b> is build as shared and static library using <code>cmake</code>. There are two options to control which libraries are built, by default both are set to ON. Basic syntax is:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;cmake [-G generator] [-DBUILD_STATIC=ON|OFF] [-DBUILD_SHARED=ON|OFF] source_dir</div></div><!-- fragment --><p>Also C++ compiler with at least C++14 support is required.</p>
<h3>Linux</h3>
<p>To build the library run following commands from root of source code directory:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;$ mkdir -p build</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;$ cd build</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;$ cmake ..</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;$ make</div></div><!-- fragment --><p>To build and run unit tests using Google Test framework run additional commands:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;$ make -f tests/Makefile</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;$ ./tests/run_tests</div></div><!-- fragment --><p><b>Note:</b> For building tests you must have all the sources including git submodules. This could be done using <code>git clone --recursive <a href="https://github.com/SemaiCZE/inicpp.git">https://github.com/SemaiCZE/inicpp.git</a></code> command when clonning or <code>git submodule update --init</code> when you already have the sources.</p>
<h3>Windows</h3>
<p>For Windows there are two ways of building <code>inicpp</code>. For both ways <code>cmake</code> has to be installed on machine.</p>
<p>Using <b>MS Visual Studio</b>:</p><ul>
<li>As stated <code>Visual Studio 2015</code> (or later) should be installed on the machine.</li>
<li>If dependencies are successfully fulfilled then run <code>cmake</code> in root directory of repository using: <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;&gt; cmake -G &quot;Visual Studio 14 2015&quot;</div></div><!-- fragment --></li>
<li>This command will generate solution files</li>
<li>Open solution file <code>inicpp.sln</code> using <code>Visual Studio</code></li>
<li>Build <code>ALL_BUILD</code> project which will hopefully successfully build whole library</li>
<li>Distribute static or shared binaries which can be found in target build directories to your program/library</li>
</ul>
<p>Using **MS Visual C++**:</p><ul>
<li>Besides <code>Visual C++ 2015</code> (or later) <code>nmake</code> compilation tool is needed (both should be part of <code>Windows SDK</code>)</li>
<li>Run <code>cmake</code> in root directory of repository using: <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;&gt; cmake -G &quot;NMake Makefiles&quot;</div></div><!-- fragment --></li>
<li>This will generate file <code>Makefile</code> which can be interpreted with <code>nmake</code></li>
<li>Now enter following easy command: <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;&gt; nmake</div></div><!-- fragment --></li>
<li>After this compiled library should appear in working directory</li>
<li>Depending on your needs use <code>inicpp</code> or <code>inicpp_static</code> in your library or program</li>
</ul>
<h2>Examples</h2>
<p>Some examples are located in <code>examples</code> directory. Compiling them requires additional steps after standard library compilation, for example on Linux (note that you must be in <code>build</code> directory):</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;$ make -f examples/Makefile</div></div><!-- fragment --><p>Compiled examples can be run as follows:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;$ ./examples/schema_validation/inicpp_schema</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;$ ./examples/basic/inicpp_basic</div></div><!-- fragment --><p>Expected outputs are also provided with examples sources.</p>
<h3>Basic usage without schema</h3>
<p>Slightly modified version of basic example.</p>
<div class="fragment"><div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Load and parse config from string&quot;</span> &lt;&lt; std::endl;</div><div class="line">config example_conf = parser::load(get_config());</div><div class="line"></div><div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Iterate through whole config and print it&quot;</span> &lt;&lt; std::endl;</div><div class="line"><span class="keywordflow">for</span>(<span class="keyword">auto</span> &amp;sect : example_conf) {</div><div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;  Section: &#39;&quot;</span> &lt;&lt; sect.get_name() &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span> &lt;&lt; std::endl;</div><div class="line">    <span class="comment">// Iterate through options in a section</span></div><div class="line">    <span class="keywordflow">for</span>(<span class="keyword">auto</span> &amp;opt : sect) {</div><div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;    Option: &#39;&quot;</span> &lt;&lt; opt.get_name() &lt;&lt; <span class="stringliteral">&quot;&#39; with value(s): &quot;</span>;</div><div class="line">        <span class="keywordflow">if</span> (!opt.is_list()) {</div><div class="line">            std::cout &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span> &lt;&lt; opt.get&lt;string_ini_t&gt;() &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span>;</div><div class="line">        } <span class="keywordflow">else</span> {</div><div class="line">            <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;list_item : opt.get_list&lt;string_ini_t&gt;())</div><div class="line">                std::cout &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span> &lt;&lt; list_item &lt;&lt; <span class="stringliteral">&quot;&#39; &quot;</span>;</div><div class="line">        }</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Get number as signed_ini_t type&quot;</span> &lt;&lt; std::endl;</div><div class="line"><span class="keywordflow">try</span> {</div><div class="line">    signed_ini_t number = example_conf[<span class="stringliteral">&quot;Numbers&quot;</span>][<span class="stringliteral">&quot;num&quot;</span>].get&lt;signed_ini_t&gt;();</div><div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;  &quot;</span> &lt;&lt; number &lt;&lt; std::endl;</div><div class="line">} <span class="keywordflow">catch</span> (bad_cast_exception) {</div><div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;  Item &#39;num&#39; in &#39;Numbers&#39; section cannot be casted to signed_ini_t type&quot;</span> &lt;&lt; std::endl;</div><div class="line">}</div><div class="line"></div><div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Change some values - could be properly typed&quot;</span> &lt;&lt; std::endl;</div><div class="line"><span class="comment">// Make reference to the section</span></div><div class="line">section &amp;number_sect = example_conf[<span class="stringliteral">&quot;Numbers&quot;</span>];</div><div class="line"><span class="comment">// Change some values</span></div><div class="line">number_sect[<span class="stringliteral">&quot;num&quot;</span>].set&lt;signed_ini_t&gt;(42222);</div><div class="line">signed_ini_t new_num = number_sect[<span class="stringliteral">&quot;num&quot;</span>].get&lt;signed_ini_t&gt;();</div><div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;  Option &#39;num&#39; in &#39;Numbers&#39; section is &#39;&quot;</span> &lt;&lt; new_num &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span> &lt;&lt; std::endl;</div><div class="line"><span class="comment">// Following two lines are equivalent</span></div><div class="line">number_sect[<span class="stringliteral">&quot;num_oct&quot;</span>].set&lt;string_ini_t&gt;(<span class="stringliteral">&quot;0756&quot;</span>);</div><div class="line">number_sect[<span class="stringliteral">&quot;num_oct&quot;</span>] = <span class="stringliteral">&quot;0756&quot;</span>s;</div><div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;  set method and assingment operator on option are equivalent&quot;</span> &lt;&lt; std::endl;</div><div class="line"></div><div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Change single value to list and vice versa&quot;</span> &lt;&lt; std::endl;</div><div class="line">option &amp;num_opt = number_sect[<span class="stringliteral">&quot;num&quot;</span>];</div><div class="line">num_opt.add_to_list&lt;signed_ini_t&gt;(99);</div><div class="line"><span class="keywordflow">if</span> (num_opt.is_list()) {</div><div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;  &#39;num&#39; option in &#39;Numbers&#39; section is list&quot;</span> &lt;&lt; std::endl;</div><div class="line">} <span class="keywordflow">else</span> {</div><div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;  &#39;num&#39; option in &#39;Numbers&#39; section is single value&quot;</span> &lt;&lt; std::endl;</div><div class="line">}</div><div class="line"><span class="comment">// Remove item from the list (specifying position)</span></div><div class="line">num_opt.remove_from_list_pos(0); <span class="comment">// remove first item</span></div><div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;  first item from &#39;num&#39; option list removed&quot;</span> &lt;&lt; std::endl;</div><div class="line"><span class="keywordflow">if</span> (num_opt.is_list()) {</div><div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;  &#39;num&#39; option in &#39;Numbers&#39; section is list&quot;</span> &lt;&lt; std::endl;</div><div class="line">} <span class="keywordflow">else</span> {</div><div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;  &#39;num&#39; option in &#39;Numbers&#39; section is single value&quot;</span> &lt;&lt; std::endl;</div><div class="line">}</div><div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;  &#39;num&#39; option value is &#39;&quot;</span> &lt;&lt; num_opt.get&lt;signed_ini_t&gt;() &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span> &lt;&lt; std::endl;</div><div class="line"></div><div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Save changes to ostream and print the result&quot;</span> &lt;&lt; std::endl;</div><div class="line">std::ostringstream ofs;</div><div class="line">ofs &lt;&lt; example_conf;</div><div class="line">std::cout &lt;&lt; ofs.str();</div></div><!-- fragment --><p>Without schema all items are treated as string type, but runtime conversion could be done to one of supported types if possible.</p>
<h3>Schema validation support</h3>
<p>Schema validation can bring you ability to make sure, that a config file contain what you expect with type safety. In addition, this implies better performance on heavy reading of validated configuration. Slightly modified version of schema validation example.</p>
<div class="fragment"><div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Create config schema&quot;</span> &lt;&lt; std::endl;</div><div class="line">schema schm;</div><div class="line"></div><div class="line"><span class="comment">// add section &#39;Section 1&#39;</span></div><div class="line">section_schema_params section_1_params;</div><div class="line">section_1_params.name = <span class="stringliteral">&quot;Section 1&quot;</span>;</div><div class="line">section_1_params.comment = <span class="stringliteral">&quot;comment&quot;</span>;</div><div class="line">section_1_params.requirement = item_requirement::optional;</div><div class="line">schm.add_section(section_1_params);</div><div class="line"></div><div class="line"><span class="comment">// add options to &#39;Section 1&#39;</span></div><div class="line">option_schema_params&lt;signed_ini_t&gt; option_1_params;</div><div class="line">option_1_params.name = <span class="stringliteral">&quot;Option 1&quot;</span>;</div><div class="line">option_1_params.type = option_item::single;</div><div class="line">option_1_params.requirement = item_requirement::mandatory;</div><div class="line">option_1_params.validator = [](signed_ini_t i){ <span class="keywordflow">return</span> i &lt; 0; }; <span class="comment">// valid values are only negative ones</span></div><div class="line">option_1_params.comment = <span class="stringliteral">&quot;Important option\nshould be negative&quot;</span>;</div><div class="line">option_1_params.default_value = <span class="stringliteral">&quot;-1&quot;</span>;</div><div class="line">schm.add_option(<span class="stringliteral">&quot;Section 1&quot;</span>, option_1_params);</div><div class="line"></div><div class="line">option_schema_params&lt;float_ini_t&gt; option_4_params;</div><div class="line">option_4_params.name = <span class="stringliteral">&quot;float1&quot;</span>;</div><div class="line">option_4_params.type = option_item::single;</div><div class="line">option_4_params.requirement = item_requirement::mandatory;</div><div class="line">schm.add_option(<span class="stringliteral">&quot;Section 1&quot;</span>, option_4_params);</div><div class="line"></div><div class="line"></div><div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Load and validate config in relaxed mode&quot;</span> &lt;&lt; std::endl;</div><div class="line">config conf = parser::load(get_config(), schm, schema_mode::relaxed);</div><div class="line"></div><div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Check, if options are properly typed&quot;</span> &lt;&lt; std::endl;</div><div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;  &#39;Option 1&#39; is signed_ini_t type with value &#39;&quot;</span> &lt;&lt;</div><div class="line">    conf[<span class="stringliteral">&quot;Section 1&quot;</span>][<span class="stringliteral">&quot;Option 1&quot;</span>].get&lt;signed_ini_t&gt;() &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span> &lt;&lt; std::endl;</div><div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;  &#39;float1&#39; option has value &#39;&quot;</span> &lt;&lt; conf[<span class="stringliteral">&quot;Section 1&quot;</span>][<span class="stringliteral">&quot;float1&quot;</span>].get&lt;float_ini_t&gt;() &lt;&lt;</div><div class="line">    std::endl;</div><div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;  &#39;unknown_option&#39; was left as string with value &#39;&quot;</span> &lt;&lt;</div><div class="line">    conf[<span class="stringliteral">&quot;Section 1&quot;</span>][<span class="stringliteral">&quot;unknown_option&quot;</span>].get&lt;string_ini_t&gt;() &lt;&lt; std::endl;</div><div class="line"></div><div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Validation with strict mode fails due to &#39;unknown_option&#39;&quot;</span> &lt;&lt; std::endl;</div><div class="line"><span class="keywordflow">try</span> {</div><div class="line">    parser::load(get_config(), schm, schema_mode::strict);</div><div class="line">} <span class="keywordflow">catch</span> (validation_exception) {</div><div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;  Strict mode validation failed&quot;</span> &lt;&lt; std::endl;</div><div class="line">}</div><div class="line"></div><div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Write default configuration from schema to stream&quot;</span> &lt;&lt; std::endl;</div><div class="line">std::ostringstream str;</div><div class="line">str &lt;&lt; schm;</div><div class="line">std::cout &lt;&lt; str.str();</div><div class="line"></div><div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Write current configuration with comments from schema to stream&quot;</span> &lt;&lt; std::endl;</div><div class="line">str.str(<span class="stringliteral">&quot;&quot;</span>);</div><div class="line">parser::save(conf, schm, str);</div><div class="line">std::cout &lt;&lt; str.str();</div></div><!-- fragment --><h2>Contribution</h2>
<p>This project is open for all contributions, but please respect some rules:</p>
<ul>
<li>write clean code</li>
<li>use modern C++ features when possible</li>
<li>write tests - no need to have 100% coverage, but some tests should be present</li>
<li>format code using our style in provided <code>.clang-format</code> file - <code>cmake</code> target <code>format</code> on unix handle this </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon May 16 2016 23:44:56 for inicpp by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
